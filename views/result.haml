%script{:type=>"text/javascript", :src=>"/experiments/canvas-text/render.js"}
:javascript
  $(document).ready(function() {
    var prevent_xss = #{ jsonify(@result.canvas_json) };
    render("scratch", prevent_xss);
    document.getElementById("pixels").innerHTML = JSON.stringify(prevent_xss).replace(/,\"/gi, ', "');
  });

#experiment
  %h1 Experiment: "#{@exp.name}"
  %h2 Result #{@result.id}
  - if not @result.title.nil?
    %h3 Title: #{@result.title}
  %h3 User Agent: #{@result.useragent}

  = render :haml, :canvas, :layout => false

  %p Pixels:
  #pixels

